(this["webpackJsonpthe-dojo"]=this["webpackJsonpthe-dojo"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(26),s=n.n(r),i=(n(33),n(16)),u=n(17),j=(n(34),n(35),n(1)),l=function(){return Object(j.jsx)("div",{children:"Dashboard"})},o=(n(37),function(){return Object(j.jsx)("div",{children:"Create"})}),b=n(5),d=n(19),O=n(13),h=n.n(O),p=n(20);n(56),n(41),n(57);p.a.initializeApp({apiKey:"AIzaSyBwPKqowgFJDC-zO_cAiPgDXHgibvGWqv8",authDomain:"the-dojo-76b39.firebaseapp.com",projectId:"the-dojo-76b39",storageBucket:"the-dojo-76b39.appspot.com",messagingSenderId:"830539958632",appId:"1:830539958632:web:435ff56d7cf53273352edd"});var x=p.a.firestore(),f=p.a.auth(),g=p.a.storage(),m=(p.a.firestore.Timestamp,n(15)),v=Object(c.createContext)(),y=function(e,t){switch(t.type){case"LOGIN":return Object(m.a)(Object(m.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(m.a)(Object(m.a)({},e),{},{user:null});case"AUTH_IS_READY":return Object(m.a)(Object(m.a)({},e),{},{user:t.payload,authIsReady:!0});default:return e}},S=function(e){var t=e.children,n=Object(c.useReducer)(y,{user:null,authIsReady:!1}),a=Object(b.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var e=f.onAuthStateChanged((function(t){s({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),Object(j.jsx)(v.Provider,{value:Object(m.a)(Object(m.a)({},r),{},{dispatch:s}),children:t})},N=function(){var e=Object(c.useContext)(v);if(!e)throw new Error("useAuthContext must used inside an AuthContextProvider");return e},w=(n(43),function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(b.a)(r,2),i=s[0],u=s[1],l=function(){var e=Object(c.useState)(null),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(b.a)(r,2),i=s[0],u=s[1],j=N().dispatch,l=Object(c.useState)(!1),o=Object(b.a)(l,2),O=o[0],p=o[1],g=function(){var e=Object(d.a)(h.a.mark((function e(t,n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(null),u(!0),e.prev=2,e.next=5,f.signInWithEmailAndPassword(t,n);case 5:return c=e.sent,e.next=8,x.collection("users").doc(c.user.uid).update({online:!0});case 8:j({type:"LOGIN",payload:c.user}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),O||a(e.t0.message);case 14:O||u(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){return p(!0)}}),[]),{login:g,error:n,isPending:i}}(),o=l.login,O=l.error,p=l.isPending;return Object(j.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),o(n,i)},children:[Object(j.jsx)("h2",{children:"Login"}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Email:"}),Object(j.jsx)("input",{required:!0,type:"email",onChange:function(e){return a(e.target.value)},value:n})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Password:"}),Object(j.jsx)("input",{required:!0,type:"password",onChange:function(e){return u(e.target.value)},value:i})]}),!p&&Object(j.jsx)("button",{className:"btn",children:"Login"}),p&&Object(j.jsx)("button",{className:"btn",disabled:!0,children:"Loading..."}),O&&Object(j.jsx)("div",{className:"error",children:O})]})}),P=function(){var e=Object(c.useState)(null),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(b.a)(r,2),i=s[0],u=s[1],j=N().dispatch,l=Object(c.useState)(!1),o=Object(b.a)(l,2),O=o[0],p=o[1],m=function(){var e=Object(d.a)(h.a.mark((function e(t,n,c,r){var s,i,l,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(null),u(!0),e.prev=2,e.next=5,f.createUserWithEmailAndPassword(t,n);case 5:if(s=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return i="thumbnails/".concat(s.user.uid,"/").concat(r.name),e.next=11,g.ref(i).put(r);case 11:return l=e.sent,e.next=14,l.ref.getDownloadURL();case 14:return o=e.sent,e.next=17,s.user.updateProfile({displayName:c,photoURL:o});case 17:return e.next=19,x.collection("users").doc(s.user.uid).set({online:!0,displayName:c,photoURL:o});case 19:j({type:"LOGIN",payload:s.user}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),O||a(e.t0.message);case 25:O||u(!1);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t,n,c,a){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){return p(!0)}}),[]),{signup:m,error:n,isPending:i}};n(44);function C(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(b.a)(r,2),i=s[0],u=s[1],l=Object(c.useState)(""),o=Object(b.a)(l,2),d=o[0],O=o[1],h=Object(c.useState)(null),p=Object(b.a)(h,2),x=p[0],f=p[1],g=Object(c.useState)(null),m=Object(b.a)(g,2),v=m[0],y=m[1],S=P(),N=S.signup,w=S.isPending,C=S.error;return Object(j.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),N(n,i,d,x)},children:[Object(j.jsx)("h2",{children:"Sign Up"}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Email:"}),Object(j.jsx)("input",{required:!0,type:"email",onChange:function(e){return a(e.target.value)},value:n})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Password:"}),Object(j.jsx)("input",{required:!0,type:"password",onChange:function(e){return u(e.target.value)},value:i})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Display Name:"}),Object(j.jsx)("input",{required:!0,type:"text",onChange:function(e){return O(e.target.value)},value:d})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Profile Thumbnail:"}),Object(j.jsx)("input",{required:!0,type:"file",onChange:function(e){f(null);var t=e.target.files[0];t?t.type.includes("image")?t.size>1e5?y("Image file size must be less than 100KB"):(y(null),f(t)):y("Selected file must be an image"):y("Please select a file")}}),v&&Object(j.jsx)("div",{className:"error",children:v})]}),!w&&Object(j.jsx)("button",{className:"btn",children:"Sign up"}),w&&Object(j.jsx)("button",{className:"btn",disabled:!0,children:"Loading..."}),C&&Object(j.jsx)("div",{className:"error",children:C})]})}n(45);var L=function(){return Object(j.jsx)("div",{children:"Project"})},I=(n(46),n.p+"static/media/temple.c57f882d.svg");function A(){var e=function(){var e=Object(c.useState)(null),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(b.a)(r,2),i=s[0],u=s[1],j=N(),l=j.dispatch,o=j.user,O=Object(c.useState)(!1),p=Object(b.a)(O,2),g=p[0],m=p[1],v=function(){var e=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(null),u(!0),e.prev=2,t=o.uid,e.next=6,x.collection("users").doc(t).update({online:!1});case 6:return e.next=8,f.signOut();case 8:l({type:"LOGOUT"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),g||a(e.t0.message);case 14:g||u(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){return m(!0)}}),[]),{logout:v,error:n,isPending:i}}(),t=e.logout,n=e.isPending;return Object(j.jsx)("nav",{className:"navbar",children:Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{className:"logo",children:[Object(j.jsx)("img",{src:I,alt:"dojo logo"}),Object(j.jsx)("span",{children:"The Dojo"})]}),Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/login",children:"Login"})}),Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/signup",children:"Signup"})}),Object(j.jsxs)("li",{children:[!n&&Object(j.jsx)("button",{className:"btn",onClick:t,children:"Logout"}),n&&Object(j.jsx)("button",{className:"btn",disabled:!0,children:"Loggin out..."})]})]})})}n(54);var E=n.p+"static/media/dashboard_icon.bc800f3b.svg",k=n.p+"static/media/add_icon.376e9b6a.svg";function D(){return Object(j.jsx)("div",{className:"sidebar",children:Object(j.jsxs)("div",{className:"sidebar-content",children:[Object(j.jsx)("div",{className:"user",children:Object(j.jsx)("p",{children:"Hey user"})}),Object(j.jsx)("nav",{className:"links",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsxs)(i.c,{exact:!0,to:"/",children:[Object(j.jsx)("img",{src:E,alt:"dashboard icon"}),Object(j.jsx)("span",{children:"Dashboard"})]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(i.c,{to:"/create",children:[Object(j.jsx)("img",{src:k,alt:"add project icon"}),Object(j.jsx)("span",{children:"New Project"})]})})]})})]})})}var U=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(i.a,{basename:"/the-dojo",children:[Object(j.jsx)(D,{}),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(A,{}),Object(j.jsxs)(u.c,{children:[Object(j.jsx)(u.a,{exact:!0,path:"/",children:Object(j.jsx)(l,{})}),Object(j.jsx)(u.a,{path:"/create",children:Object(j.jsx)(o,{})}),Object(j.jsx)(u.a,{path:"/login",children:Object(j.jsx)(w,{})}),Object(j.jsx)(u.a,{path:"/signup",children:Object(j.jsx)(C,{})}),Object(j.jsx)(u.a,{path:"/project/:id",children:Object(j.jsx)(L,{})})]})]})]})})};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(S,{children:Object(j.jsx)(U,{})})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.e289b60e.chunk.js.map