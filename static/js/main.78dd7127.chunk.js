(this["webpackJsonpthe-dojo"]=this["webpackJsonpthe-dojo"]||[]).push([[0],{33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),s=c(25),r=c.n(s),i=(c(33),c(15)),j=c(16),l=(c(34),c(35),c(1)),u=function(){return Object(l.jsx)("div",{children:"Dashboard"})},o=(c(37),function(){return Object(l.jsx)("div",{children:"Create"})}),d=(c(38),function(){return Object(l.jsx)("div",{children:"Login"})}),b=c(11),O=c(26),h=c(23),x=c.n(h),p=c(18);c(56),c(42),c(57);p.a.initializeApp({apiKey:"AIzaSyBwPKqowgFJDC-zO_cAiPgDXHgibvGWqv8",authDomain:"the-dojo-76b39.firebaseapp.com",projectId:"the-dojo-76b39",storageBucket:"the-dojo-76b39.appspot.com",messagingSenderId:"830539958632",appId:"1:830539958632:web:435ff56d7cf53273352edd"});var f=p.a.firestore(),m=p.a.auth(),g=p.a.storage(),v=(p.a.firestore.Timestamp,c(14)),y=Object(n.createContext)(),N=function(e,t){switch(t.type){case"LOGIN":return Object(v.a)(Object(v.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(v.a)(Object(v.a)({},e),{},{user:null});case"AUTH_IS_READY":return Object(v.a)(Object(v.a)({},e),{},{user:t.payload,authIsReady:!0});default:return e}},S=function(e){var t=e.children,c=Object(n.useReducer)(N,{user:null,authIsReady:!1}),a=Object(b.a)(c,2),s=a[0],r=a[1];return Object(n.useEffect)((function(){var e=m.onAuthStateChanged((function(t){r({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),Object(l.jsx)(y.Provider,{value:Object(v.a)(Object(v.a)({},s),{},{dispatch:r}),children:t})},w=function(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),r=Object(b.a)(s,2),i=r[0],j=r[1],l=function(){var e=Object(n.useContext)(y);if(!e)throw new Error("useAuthContext must used inside an AuthContextProvider");return e}().dispatch,u=Object(n.useState)(!1),o=Object(b.a)(u,2),d=o[0],h=o[1],p=function(){var e=Object(O.a)(x.a.mark((function e(t,c,n,s){var r,i,u,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(null),j(!0),e.prev=2,e.next=5,m.createUserWithEmailAndPassword(t,c);case 5:if(r=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return i="thumbnails/".concat(r.user.uid,"/").concat(s.name),e.next=11,g.ref(i).put(s);case 11:return u=e.sent,e.next=14,u.ref.getDownloadURL();case 14:return o=e.sent,e.next=17,r.user.updateProfile({displayName:n,photoURL:o});case 17:return e.next=19,f.collection("users").doc(r.user.id).set({online:!0,displayName:n,photoURL:o});case 19:l({type:"LOGIN",payload:r.user}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),d||a(e.t0.message);case 25:d||j(!1);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t,c,n,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return h(!0)}}),[]),{signup:p,error:c,isPending:i}};c(44);function P(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),r=Object(b.a)(s,2),i=r[0],j=r[1],u=Object(n.useState)(""),o=Object(b.a)(u,2),d=o[0],O=o[1],h=Object(n.useState)(null),x=Object(b.a)(h,2),p=x[0],f=x[1],m=Object(n.useState)(null),g=Object(b.a)(m,2),v=g[0],y=g[1],N=w(),S=N.signup,P=N.isPending,A=N.error;return Object(l.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),S(c,i,d,p)},children:[Object(l.jsx)("h2",{children:"Sign Up"}),Object(l.jsxs)("label",{children:[Object(l.jsx)("span",{children:"Email:"}),Object(l.jsx)("input",{required:!0,type:"email",onChange:function(e){return a(e.target.value)},value:c})]}),Object(l.jsxs)("label",{children:[Object(l.jsx)("span",{children:"Password:"}),Object(l.jsx)("input",{required:!0,type:"password",onChange:function(e){return j(e.target.value)},value:i})]}),Object(l.jsxs)("label",{children:[Object(l.jsx)("span",{children:"Display Name:"}),Object(l.jsx)("input",{required:!0,type:"text",onChange:function(e){return O(e.target.value)},value:d})]}),Object(l.jsxs)("label",{children:[Object(l.jsx)("span",{children:"Profile Thumbnail:"}),Object(l.jsx)("input",{required:!0,type:"file",onChange:function(e){f(null);var t=e.target.files[0];t?t.type.includes("image")?t.size>1e5?y("Image file size must be less than 100KB"):(y(null),f(t)):y("Selected file must be an image"):y("Please select a file")}}),v&&Object(l.jsx)("div",{className:"error",children:v})]}),!P&&Object(l.jsx)("button",{className:"btn",children:"Sign up"}),P&&Object(l.jsx)("button",{className:"btn",disabled:!0,children:"loading"}),A&&Object(l.jsx)("div",{className:"error",children:A})]})}c(45);var A=function(){return Object(l.jsx)("div",{children:"Project"})},C=(c(46),c.p+"static/media/temple.c57f882d.svg");function I(){return Object(l.jsx)("nav",{className:"navbar",children:Object(l.jsxs)("ul",{children:[Object(l.jsxs)("li",{className:"logo",children:[Object(l.jsx)("img",{src:C,alt:"dojo logo"}),Object(l.jsx)("span",{children:"The Dojo"})]}),Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/login",children:"Login"})}),Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/signup",children:"Signup"})}),Object(l.jsx)("li",{children:Object(l.jsx)("button",{className:"btn",children:"Logout"})})]})})}c(54);var D=c.p+"static/media/dashboard_icon.bc800f3b.svg",E=c.p+"static/media/add_icon.376e9b6a.svg";function L(){return Object(l.jsx)("div",{className:"sidebar",children:Object(l.jsxs)("div",{className:"sidebar-content",children:[Object(l.jsx)("div",{className:"user",children:Object(l.jsx)("p",{children:"Hey user"})}),Object(l.jsx)("nav",{className:"links",children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsxs)(i.c,{exact:!0,to:"/",children:[Object(l.jsx)("img",{src:D,alt:"dashboard icon"}),Object(l.jsx)("span",{children:"Dashboard"})]})}),Object(l.jsx)("li",{children:Object(l.jsxs)(i.c,{to:"/create",children:[Object(l.jsx)("img",{src:E,alt:"add project icon"}),Object(l.jsx)("span",{children:"New Project"})]})})]})})]})})}var R=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(i.a,{basename:"/the-dojo",children:[Object(l.jsx)(L,{}),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(I,{}),Object(l.jsxs)(j.c,{children:[Object(l.jsx)(j.a,{exact:!0,path:"/",children:Object(l.jsx)(u,{})}),Object(l.jsx)(j.a,{path:"/create",children:Object(l.jsx)(o,{})}),Object(l.jsx)(j.a,{path:"/login",children:Object(l.jsx)(d,{})}),Object(l.jsx)(j.a,{path:"/signup",children:Object(l.jsx)(P,{})}),Object(l.jsx)(j.a,{path:"/project/:id",children:Object(l.jsx)(A,{})})]})]})]})})};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(S,{children:Object(l.jsx)(R,{})})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.78dd7127.chunk.js.map